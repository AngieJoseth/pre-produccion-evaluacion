(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"f+ep":function(n,l,o){"use strict";o.r(l),o.d(l,"LoginModuleNgFactory",function(){return w});var e=o("8Y7J");class t{}var u=o("pMnS"),i=o("s7LF"),r=o("TSSN"),a=o("SVse"),s=o("Lk47"),g=o("PSD3"),c=o.n(g);class d{constructor(n,l,o,e){this.spinner=n,this.service=l,this.translate=o,this.router=e,this.translate.addLangs(["es"]),this.translate.setDefaultLang("es");const t=this.translate.getBrowserLang();this.translate.use(t.match(/en|es/)?t:"es"),this.translate.use("es")}ngOnInit(){this.validateLogin=!0,this.correoValido=!1}onLoggedin(n){if(13===n.which||13===n){this.validateLogin=!1,this.spinner.show();const n=1,l="gCKtEi6W8KpXgWCv4sDSlkM6IErcQQLTuvW5j5yg",o="password";let e=this.userName.toLocaleLowerCase();-1===e.search("@")&&(e=this.userName+"@yavirac.edu.ec"),this.service.postPublic("oauth/token",{client_id:n,client_secret:l,grant_type:o,username:e,password:this.password}).subscribe(n=>{localStorage.setItem("token",JSON.stringify(n.access_token)),localStorage.setItem("isLoggedin","true"),this.service.get("usuarios/login?email="+e).subscribe(n=>{"ACTIVO"===n.usuario.estado?(localStorage.setItem("user",JSON.stringify(n.usuario)),"1"===n.usuario.role.rol&&this.router.navigate(["dashboard-cupo"]),"2"===n.usuario.role.rol&&this.router.navigate(["perfil-estudiante"]),"3"===n.usuario.role.rol&&this.router.navigate(["dashboard-matricula"]),"4"===n.usuario.role.rol&&this.router.navigate(["dashboard-matricula"]),"5"===n.usuario.role.rol&&this.router.navigate(["usuarios"]),"6"===n.usuario.role.rol&&this.router.navigate(["dashboard-matricula"]),"7"===n.usuario.role.rol&&this.router.navigate(["dashboard-docente"]),"8"===n.usuario.role.rol&&this.router.navigate(["admin-evaluacion"])):"INACTIVO"===n.usuario.estado&&(localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("isLoggedin"),c.a.fire("Usuario INACTIVO","Su usuario se encuentra inactivo, consulte al administrador","warning"),this.validateLogin=!0)}),this.validateLogin=!1,this.spinner.hide()},n=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("isLoggedin"),c.a.fire("Credenciales Incorrectas","Nombre de Usuario y/o Contrase\xf1a incorrectos","warning"),this.validateLogin=!0,this.spinner.hide()})}}forgotPassword(){let n=this.userName;null!=n&&""!==n?(-1===n.search("@")&&(n=this.userName+"@yavirac.edu.ec"),this.validateCorreoElectronico(n)&&(this.spinner.show(),this.service.postPublic("password/email",{email:n}).subscribe(n=>{console.log(n),this.spinner.hide(),c.a.fire("\xa1Correo Electr\xf3nico Enviado!","Ingrese a su correo electr\xf3nico institucional","success")},n=>{console.log(n),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("isLoggedin"),this.spinner.hide(),c.a.fire("\xa1Correo Electr\xf3nico Enviado!","Ingrese a su correo electr\xf3nico institucional","info")}))):c.a.fire("\xa1Correo Electr\xf3nico Institucional Incorrecto!","Ingrese un correo v\xe1lido","error")}validateCorreoElectronico(n){return/^[_a-z0-9-]+(.[_a-z0-9-]+)*@[a-z0-9-]+(.[a-z0-9-]+)*(.[a-z]{2,4})$/.test(n)?(this.correoValido=!0,!0):(this.correoValido=!1,!1)}}var b=o("7g+E"),p=o("iInd"),m=e.ub({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}.login-page[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;overflow:auto;background:#222;text-align:center;color:#fff;padding:3em}.login-page[_ngcontent-%COMP%]   .col-lg-4[_ngcontent-%COMP%]{padding:0}.login-page[_ngcontent-%COMP%]   .input-lg[_ngcontent-%COMP%]{height:46px;padding:10px 16px;font-size:18px;line-height:1.3333333;border-radius:0}.login-page[_ngcontent-%COMP%]   .input-underline[_ngcontent-%COMP%]{background:0 0;border:none;box-shadow:none;border-bottom:2px solid rgba(255,255,255,.5);color:#fff;border-radius:0}.login-page[_ngcontent-%COMP%]   .input-underline[_ngcontent-%COMP%]:focus{border-bottom:2px solid #fff;box-shadow:none}.login-page[_ngcontent-%COMP%]   .rounded-btn[_ngcontent-%COMP%]{border-radius:50px;color:rgba(255,255,255,.8);background:#222;border:2px solid rgba(255,255,255,.8);font-size:18px;line-height:40px;padding:0 25px}.login-page[_ngcontent-%COMP%]   .rounded-btn[_ngcontent-%COMP%]:active, .login-page[_ngcontent-%COMP%]   .rounded-btn[_ngcontent-%COMP%]:focus, .login-page[_ngcontent-%COMP%]   .rounded-btn[_ngcontent-%COMP%]:hover, .login-page[_ngcontent-%COMP%]   .rounded-btn[_ngcontent-%COMP%]:visited{color:#fff;border:2px solid #fff;outline:0}.login-page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:300;margin-top:20px;margin-bottom:10px;font-size:36px}.login-page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:rgba(255,255,255,.7)}.login-page[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{padding:8px 0}.login-page[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:rgba(255,255,255,.6)!important}.login-page[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-moz-placeholder{color:rgba(255,255,255,.6)!important}.login-page[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:rgba(255,255,255,.6)!important}.login-page[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:rgba(255,255,255,.6)!important}.login-page[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{padding:40px 0}.login-page[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{border-radius:50%;border:2px solid #fff}"]],data:{animation:[{type:7,name:"routerTransition",definitions:[],options:{}}]}});function h(n){return e.Qb(0,[(n()(),e.wb(0,0,null,null,37,"form",[["novalidate",""],["role","form"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,l,o){var t=!0;return"submit"===l&&(t=!1!==e.Gb(n,2).onSubmit(o)&&t),"reset"===l&&(t=!1!==e.Gb(n,2).onReset()&&t),t},null,null)),e.vb(1,16384,null,0,i.B,[],null,null),e.vb(2,4210688,null,0,i.p,[[8,null],[8,null]],null,null),e.Lb(2048,null,i.c,null,[i.p]),e.vb(4,16384,null,0,i.o,[[4,i.c]],null,null),(n()(),e.wb(5,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),e.wb(6,0,null,null,3,"label",[["for","userName"]],null,null,null,null,null)),(n()(),e.wb(7,0,null,null,2,"i",[["class","fa fa-envelope"]],null,null,null,null,null)),(n()(),e.Ob(8,null,[" "," "])),e.Ib(131072,r.i,[r.j,e.i]),(n()(),e.wb(10,0,null,null,9,"div",[["class","form-group input-group"]],null,null,null,null,null)),(n()(),e.wb(11,0,null,null,5,"input",[["class","form-control input-underline input-lg text-right text-lowercase"],["id","userName"],["name","userName"],["placeholder",""],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,o){var t=!0,u=n.component;return"input"===l&&(t=!1!==e.Gb(n,12)._handleInput(o.target.value)&&t),"blur"===l&&(t=!1!==e.Gb(n,12).onTouched()&&t),"compositionstart"===l&&(t=!1!==e.Gb(n,12)._compositionStart()&&t),"compositionend"===l&&(t=!1!==e.Gb(n,12)._compositionEnd(o.target.value)&&t),"ngModelChange"===l&&(t=!1!==(u.userName=o)&&t),"keyup"===l&&(t=!1!==u.onLoggedin(o)&&t),t},null,null)),e.vb(12,16384,null,0,i.d,[e.I,e.n,[2,i.a]],null,null),e.Lb(1024,null,i.l,function(n){return[n]},[i.d]),e.vb(14,671744,null,0,i.q,[[2,i.c],[8,null],[8,null],[6,i.l]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),e.Lb(2048,null,i.m,null,[i.q]),e.vb(16,16384,null,0,i.n,[[4,i.m]],null,null),(n()(),e.wb(17,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(n()(),e.wb(18,0,null,null,1,"label",[["class","input-group-text  input-underline input-lg"],["for","userName"],["id","basic-addon1"]],null,null,null,null,null)),(n()(),e.Ob(-1,null,["@yavirac.edu.ec"])),(n()(),e.wb(20,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),e.wb(21,0,null,null,4,"label",[["for","password"]],null,null,null,null,null)),(n()(),e.wb(22,0,null,null,3,"i",[["class","fa fa-key"]],null,null,null,null,null)),(n()(),e.Ob(23,null,[" ",""])),e.Ib(131072,r.i,[r.j,e.i]),(n()(),e.wb(25,0,null,null,0,"i",[["class","fa fa-question btn"],["title","Su contrase\xf1a por defecto es su n\xfamero de c\xe9dula"]],null,null,null,null,null)),(n()(),e.wb(26,0,null,null,5,"input",[["class","form-control input-underline input-lg"],["id","password"],["name","password"],["placeholder",""],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,o){var t=!0,u=n.component;return"input"===l&&(t=!1!==e.Gb(n,27)._handleInput(o.target.value)&&t),"blur"===l&&(t=!1!==e.Gb(n,27).onTouched()&&t),"compositionstart"===l&&(t=!1!==e.Gb(n,27)._compositionStart()&&t),"compositionend"===l&&(t=!1!==e.Gb(n,27)._compositionEnd(o.target.value)&&t),"ngModelChange"===l&&(t=!1!==(u.password=o)&&t),"keyup"===l&&(t=!1!==u.onLoggedin(o)&&t),t},null,null)),e.vb(27,16384,null,0,i.d,[e.I,e.n,[2,i.a]],null,null),e.Lb(1024,null,i.l,function(n){return[n]},[i.d]),e.vb(29,671744,null,0,i.q,[[2,i.c],[8,null],[8,null],[6,i.l]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),e.Lb(2048,null,i.m,null,[i.q]),e.vb(31,16384,null,0,i.n,[[4,i.m]],null,null),(n()(),e.wb(32,0,null,null,2,"a",[["class","btn rounded-btn"]],null,[[null,"click"]],function(n,l,o){var e=!0;return"click"===l&&(e=!1!==n.component.onLoggedin(13)&&e),e},null,null)),(n()(),e.Ob(33,null,["",""])),e.Ib(131072,r.i,[r.j,e.i]),(n()(),e.wb(35,0,null,null,2,"a",[["class","btn rounded-btn m-3"],["title","Escribe tu correo y has click aqu\xed"]],null,[[null,"click"]],function(n,l,o){var e=!0;return"click"===l&&(e=!1!==n.component.forgotPassword()&&e),e},null,null)),(n()(),e.Ob(36,null,["\xbf","?"])),e.Ib(131072,r.i,[r.j,e.i])],function(n,l){var o=l.component;n(l,14,0,"userName",!o.validateLogin,o.userName),n(l,29,0,"password",!o.validateLogin,o.password)},function(n,l){n(l,0,0,e.Gb(l,4).ngClassUntouched,e.Gb(l,4).ngClassTouched,e.Gb(l,4).ngClassPristine,e.Gb(l,4).ngClassDirty,e.Gb(l,4).ngClassValid,e.Gb(l,4).ngClassInvalid,e.Gb(l,4).ngClassPending),n(l,8,0,e.Pb(l,8,0,e.Gb(l,9).transform("Institutional Email"))),n(l,11,0,e.Gb(l,16).ngClassUntouched,e.Gb(l,16).ngClassTouched,e.Gb(l,16).ngClassPristine,e.Gb(l,16).ngClassDirty,e.Gb(l,16).ngClassValid,e.Gb(l,16).ngClassInvalid,e.Gb(l,16).ngClassPending),n(l,23,0,e.Pb(l,23,0,e.Gb(l,24).transform("Password"))),n(l,26,0,e.Gb(l,31).ngClassUntouched,e.Gb(l,31).ngClassTouched,e.Gb(l,31).ngClassPristine,e.Gb(l,31).ngClassDirty,e.Gb(l,31).ngClassValid,e.Gb(l,31).ngClassInvalid,e.Gb(l,31).ngClassPending),n(l,33,0,e.Pb(l,33,0,e.Gb(l,34).transform("Log in"))),n(l,36,0,e.Pb(l,36,0,e.Gb(l,37).transform("Forgot Password")))})}function v(n){return e.Qb(0,[(n()(),e.wb(0,0,null,null,7,"div",[["class","login-page"]],[[24,"@routerTransition",0]],null,null,null,null)),(n()(),e.wb(1,0,null,null,6,"div",[["class","row justify-content-md-center"]],null,null,null,null,null)),(n()(),e.wb(2,0,null,null,5,"div",[["class","col-lg-4"]],null,null,null,null,null)),(n()(),e.wb(3,0,null,null,0,"img",[["class","user-avatar"],["src","assets/images/logo.png"],["width","70px"]],null,null,null,null,null)),(n()(),e.wb(4,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),e.Ob(-1,null,["IGNUG"])),(n()(),e.lb(16777216,null,null,1,null,h)),e.vb(7,16384,null,0,a.m,[e.T,e.Q],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,7,0,l.component.validateLogin)},function(n,l){n(l,0,0,void 0)})}function f(n){return e.Qb(0,[(n()(),e.wb(0,0,null,null,1,"app-login",[],null,null,null,v,m)),e.vb(1,114688,null,0,d,[b.c,s.a,r.j,p.l],null,null)],function(n,l){n(l,1,0)},null)}var C=e.sb("app-login",d,f,{},{},[]);class P{}var w=e.tb(t,[],function(n){return e.Db([e.Eb(512,e.l,e.gb,[[8,[u.a,C]],[3,e.l],e.A]),e.Eb(4608,a.o,a.n,[e.x,[2,a.C]]),e.Eb(4608,i.y,i.y,[]),e.Eb(1073742336,a.b,a.b,[]),e.Eb(1073742336,r.g,r.g,[]),e.Eb(1073742336,p.p,p.p,[[2,p.u],[2,p.l]]),e.Eb(1073742336,P,P,[]),e.Eb(1073742336,i.x,i.x,[]),e.Eb(1073742336,i.j,i.j,[]),e.Eb(1073742336,t,t,[]),e.Eb(1024,p.j,function(){return[[{path:"",component:d}]]},[])])})}}]);